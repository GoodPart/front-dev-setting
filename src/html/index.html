<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- <link rel="stylesheet" href="/assets/style/css/test.css" type="text/css"> -->
    <link rel="stylesheet" href="https://uicdn.toast.com/tui-grid/latest/tui-grid.css" />
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://uicdn.toast.com/tui-grid/latest/tui-grid.js"></script>
    <script type="text/javascript" src="/assets/script/common.js"></script>
</head>
<style type="text/css">
    /* http://meyerweb.com/eric/tools/css/reset/ 
   v2.0 | 20110126
   License: none (public domain)
*/

html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed, 
figure, figcaption, footer, header, hgroup, 
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
	margin: 0;
	padding: 0;
	border: 0;
	font-size: 100%;
	font: inherit;
	vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure, 
footer, header, hgroup, menu, nav, section {
	display: block;
}
body {
	line-height: 1;
}
ol, ul {
	list-style: none;
}
blockquote, q {
	quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
	content: '';
	content: none;
}
table {
	border-collapse: collapse;
	border-spacing: 0;
}



    .content {
        position: relative;
        overflow: scroll;
        height: 200px;
    }
    .tg  {border-collapse:collapse;border-spacing:0;}
    .tg td{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
      overflow:hidden;padding:10px 5px;word-break:normal;}
    .tg th{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
      font-weight:normal;overflow:hidden;padding:10px 5px;word-break:normal;}
    .tg .tg-0pky{border-color:inherit;text-align:left;vertical-align:top}
    .tg .tg-0lax{text-align:left;vertical-align:top}

    thead {
        position: sticky;
        top: 0;
        background-color: red;
        /* opacity: 0.34; */
        z-index: 100;
    }
    tbody tr td:nth-child(2){
        position: relative;
    }
    .target {
        display: block;
    }
    .target.active {
        /* position: fixed; */
    }

    .content2 {
        position: relative;
        margin-top: 100px;
    }

    /* toast ui style */
    #grid {
        height: 300px;
        position: relative;
        overflow-y: scroll;
    }
    .tui-grid-header-area {
        position: fixed;
        top: 91px;
        z-index: 200;
    }
    .tui-grid-body-area {
        /* padding-top: 40px; */
    }

    .tui-grid-cell-header {
        padding: 0;
    }

    .tui-grid-lside-area {}

    .tui-grid-lside-area .tui-grid-header-area {
        width: 40px;
    }

    .tui-grid-cell.active {
        vertical-align: top !important;
        background-color: coral;
    }
    </style>
<body>
    @@include('./src/html/header/header.html')

    <h2>
        h2입니다.123
    </h2>
    <div class="content2">
        <div id="grid"></div>
    </div>
    <div class="content" style="display: none;">
        <table class="tg">
            <thead>
              <tr>
                <th class="tg-0pky"></th>
                <th class="tg-0pky">a</th>
                <th class="tg-0lax">b</th>
                <th class="tg-0lax">c</th>
                <th class="tg-0lax">d</th>
                <th class="tg-0lax">e</th>
                <th class="tg-0lax">f</th>
                <th class="tg-0lax">g</th>
                <th class="tg-0lax">h</th>
              </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="tg-0lax">8</td>
                    <td class="tg-0lax">asd</td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                  </tr>
                  <tr>
                    <td class="tg-0lax">8</td>
                    <td class="tg-0lax">asd</td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                  </tr>
                  <tr>
                    <td class="tg-0lax">8</td>
                    <td class="tg-0lax">asd</td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                  </tr>
                  <tr>
                    <td class="tg-0lax">8</td>
                    <td class="tg-0lax">asd</td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                  </tr>
                  <tr>
                    <td class="tg-0lax">8</td>
                    <td class="tg-0lax">asd</td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                  </tr>
                  <tr>
                    <td class="tg-0lax">8</td>
                    <td class="tg-0lax">asd</td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                  </tr>
            <tr>
                <td class="tg-0pky">1</td>
                <td class="tg-0pky" style="width: 25%;" rowspan="7"><span class="target ready">위성</span></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
            </tr>
              <tr>
                <td class="tg-0pky">2</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0pky">3</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0pky">4</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">5</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">6</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">7</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">8</td>
                <td class="tg-0lax">asd</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">9</td>
                <td class="tg-0lax">123</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0pky">1</td>
                <td class="tg-0pky" style="width: 25%;" rowspan="7"><span class="target ready target2">위성2</span></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
            </tr>
              <tr>
                <td class="tg-0pky">2</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0pky">3</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0pky">4</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">5</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">6</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">7</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">10</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">10</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">10</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">10</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">10</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">10</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">10</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">10</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">10</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">10</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">10</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">10</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">10</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0pky">1</td>
                <td class="tg-0pky" style="width: 25%;" rowspan="2"><span class="target ready target3">위성3</span></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
            </tr>
              <tr>
                <td class="tg-0pky">2</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">10</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">10</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">10</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">10</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">10</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">10</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
            </tbody>
            </table>
        <div class="sticky">I will stick to the screen when you reach my scroll position</div>
        <!-- 이미지 루트 -->
        <!-- <img src="/assets/images/20220301-Event-kakao-visual-2x.jpg" alt=""> -->
    </div>
    @@include('./src/html/footer/footer.html', {
        type : 'mobile'
    })

    <script>
        var content = document.querySelector(".content");

        var table = document.querySelector(".tg");
        var tbody = table.querySelector("tbody");
        var _targetAll = tbody.querySelectorAll(".target");


        let lastScroll = 0;
        const headerValue = 37;


        /*
        // toast ui target class
        target = .tui-grid-cell-content
        */

       
        var targetArray = [];


        window.addEventListener("load", ()=> {
            console.log("load")
            var content2 = document.querySelector(".content2");

        
            var root = document.querySelector("#grid"); // root

            // riside table Area cunstructor
            var rsideTableArea = root.querySelector(".tui-grid-rside-area");
            var rsideTableBodyArea = rsideTableArea.querySelector(".tui-grid-body-area");
            var rsideTable = rsideTableBodyArea.querySelector(".tui-grid-table"); // rside table
            var rsideTableBody = rsideTable.querySelector("tbody"); // rside tbody
            var rsideTbodyTr = rsideTableBody.querySelectorAll("tr");

            // text 높이 -> cell 높이 / 2를 한 값.
            var textHeight = 20;


            function textInit(target) {
                target.style.transform = `translateY(${textHeight/2}px)`
            }

            // 테이블 동적 병합
            $.fn.mergeClassRowspan = function (colIdx) {
                return this.each(function () {
                    var that;
                    $('tr', this).each(function (row) {
                        $('td:eq(' + colIdx + ')', this).filter(':visible').each(function (col) {

                            if ($(this).attr('class') == $(that).attr('class')) {
                                rowspan = $(that).attr("rowspan") || 1;
                                rowspan = Number(rowspan) + 1;

                                $(that).attr("rowspan", rowspan);

                                // do your action for the colspan cell here            
                                $(this).hide();

                                //$(this).remove(); 
                                // do your action for the old cell here

                            } else {
                                that = this;
                            }

                            // set the that if not already set
                            that = (that == null) ? this : that;
                        });
                    });
                });
            };



            // 타겟의 위치 구하기.
            // tr
            
            for(var i = 0; i<rsideTbodyTr.length; i++) {
                const rsideTbodyTrChildCount = rsideTbodyTr[i].childElementCount;
                const target = rsideTbodyTr[i];

                // td의 데이터를 찾아 클래스명 삽입
                for(var j = 0; j<rsideTbodyTrChildCount-1; j++) {
                    const result = target.childNodes[j];

                    //tr의 자식들[1] - 두번째 영역의 모든 text 찾기
                    const getTd = target.children[1];
                    const trText = getTd.querySelector("div").innerText;

                    // 데이터가 있음을 확인
                    if(trText) {
                        if(trText === "artist1") {
                            getTd.classList.add("artist1")
                        }
                        if(trText === "artist2") {
                            getTd.classList.add("artist2")
                        }
                        if(trText === "artist3") {
                            getTd.classList.add("artist3")
                        }
                    }else {
                        
                    }

                }

                // 상태 체크하여 데이터 조작하기
              
                // 모든 클래스 삽입 이 끝났으면
                if(i === rsideTbodyTr.length-1) {

                    // 이 녀석이 처음에만 실행되야함.
                    // $('#grid .tui-grid-rside-area .tui-grid-body-area tbody').mergeClassRowspan(1);

                    $(".tui-grid-btn-sorting").click((e)=> {
                        // e.target.classList.contains("tui-grid-btn-sorting-up" || "tui-grid-btn-sorting-down")
                        
                        grid.resetOriginData(gridData);

                        
                        if(e.target.classList.contains("tui-grid-btn-sorting-up")){
                            grid.sort('artist',true)
                            // setTimeout(()=> {
                            //     $('#grid .tui-grid-rside-area .tui-grid-body-area tbody').mergeClassRowspan(1);
                            // },500)
                            
                        }else if(e.target.classList.contains("tui-grid-btn-sorting-down")) {
                            grid.sort('artist', false)
                            // setTimeout(()=> {
                            //     $('#grid .tui-grid-rside-area .tui-grid-body-area tbody').mergeClassRowspan(1);
                            // },500)
                        }
                        $('#grid .tui-grid-rside-area .tui-grid-body-area tbody').mergeClassRowspan(1);


                        for(var k = 0; k<rsideTbodyTr.length; k++) {

                            // console.log(rsideTbodyTr[k].children[1])
                            if(rsideTbodyTr[k].children[1].rowSpan > 1) {
                                rsideTbodyTr[k].children[1].classList.add("active"); // vertical-align : top
                                rsideTbodyTr[k].children[1].querySelector("div").classList.add("ready"); // readt 클래스 부여
                                textInit(rsideTbodyTr[k].children[1].querySelector("div")) // text 상태 초기화
                                targetArray.push(rsideTbodyTr[k].children[1].querySelector("div"));
                            }

                            }
                    })

                        // 그리드 sort하는법
                        // grid.sort('artist', true)

                    


                } 
            }; 





            function followLabel(el, scrollValue, headValue, direction) {
            var target = el;
            var scrollValue = scrollValue;
            var headValue = 20;

            function init(scrollValue, target) {
                if(target.classList.contains("ready") && (target.parentElement.offsetHeight + target.parentElement.offsetTop - (headValue*2)  < scrollValue) ) {
                    target.style.transform = `translateY(${target.parentElement.offsetHeight-headValue-(textHeight/2)}px)`
                }else if(target.classList.contains("ready") && (target.parentElement.offsetHeight + target.parentElement.offsetTop - (headValue*2)  > scrollValue)) {
                    target.style.transform = `translateY(${textHeight/2}px)`
                }
            }

            
            // 감시 영역 조건문
            if(scrollValue >= target.parentElement.offsetTop-headValue+textHeight && scrollValue <= target.parentElement.offsetHeight + target.parentElement.offsetTop - (headValue*2) ) {
                target.classList.remove("ready");
                target.classList.add("active");
                target.style.transform = `translateY(${scrollValue-target.parentElement.offsetTop+headValue-(textHeight/2)}px)`
            }else {
                target.classList.remove("active");
                target.classList.add("ready");
                // 감시 영역을 벗어남 + 비정상 translate 값 초기화
                init(scrollValue, target)
            }
        };

            function scrollDirection(currentScroll) {
                if (currentScroll > 0 && lastScroll <= currentScroll){
                    lastScroll = currentScroll;
                    // console.log('down')
                    return true;


                }else{
                    lastScroll = currentScroll;
                    return false;
                    // console.log('up')
                    
                }
            }

            root.addEventListener("scroll", (e) => {
                const scrollValue = e.target.scrollTop;
                let currentScroll = content.scrollTop || document.body.scrollTop;

                // console.log(scrollDirection(currentScroll))
                if(scrollDirection(currentScroll)) {
                    for(var i = 0; i<targetArray.length; i++) {
                        followLabel(targetArray[i], scrollValue, headerValue)
                    }
                }else {
                    for(var i = 0; i<targetArray.length; i++) {
                        followLabel(targetArray[i], scrollValue, headerValue)
                    }
                }
            });

                
        });

            

        



        


        //토스트ui test data
        // let data = [];
        //     for(var i = 0; i<100; i++) {
        //         var tempData = {
        //             name : `name-data--${i}`,
        //             artist : `artist-data--${i}`,
        //             type : `type-data--${i}`,
        //             release : `release-data--${i}`,
        //             genre : `genre-data--${i}`,
        //         }
        //         newData = data.push(tempData);
        //     }
        
        //     console.log(newData)

        
        // 임시 데이터
        const gridData = [
            {
                name : "a",
                artist : "artist1"
            },
            {
                name : "b",
                artist : "artist2"
            },
            {
                name : "c",
                artist : "artist3"
            },
            {
                name : "d",
                artist : "artist1"
            },
            {
                name : "e",
                artist : "artist1"
            },
            {
                name : "d",
                artist : "artist1"
            },
            {
                name : "e",
                artist : "artist1"
            },
            {
                name : "a",
                artist : "artist1"
            },
            {
                name : "b",
                artist : "artist2"
            },
            {
                name : "c",
                artist : "artist3"
            },
            {
                name : "a",
                artist : "artist1"
            },
            {
                name : "a",
                artist : "artist1"
            },
            {
                name : "c",
                artist : "artist3"
            },
            {
                name : "a",
                artist : "artist1"
            },
            {
                name : "b",
                artist : "artist2"
            },
            {
                name : "b",
                artist : "artist2"
            },
            {
                name : "b",
                artist : "artist2"
            },
            {
                name : "b",
                artist : "artist2"
            },
            {
                name : "b",
                artist : "artist2"
            },
            {
                name : "b",
                artist : "artist2"
            },
            {
                name : "b",
                artist : "artist2"
            },
            {
                name : "c",
                artist : "artist3"
            },
            {
                name : "a",
                artist : "artist1"
            },
            {
                name : "b",
                artist : "artist2"
            },
            {
                name : "c",
                artist : "artist3"
            },

        ];
        // 그리드 init
        const grid = new tui.Grid({
            el: document.getElementById('grid'),
            data: gridData,
            scrollX: false,
            scrollY: false,
            // bodyHeight: 300,
            rowHeaders: ['rowNum'],
            columns: [
                {
                    header: 'Name',
                    name: 'name',
                },
                {
                    header: 'Artist',
                    name: 'artist',
                    sortingType: 'desc',
                    sortable: true
                },
                
            ]
            });
            console.log("grid")

            // 해당 그리드가 sort 되면.
            grid.on('sort', function(ev) {
                
             
            //  console.log("afterSort", targetArray)
             
             
                 
            });
        

    </script>
</body>
</html>