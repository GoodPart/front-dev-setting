<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <!-- <link rel="stylesheet" href="/resources/style/css/test.css" type="text/css"> -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <link rel="stylesheet" href="/resources/lib/tui/tui-grid.css" />
    
    <script type="text/javascript" src="/resources/script/common.js"></script>
</head>
<style type="text/css">
    /* http://meyerweb.com/eric/tools/css/reset/ 
   v2.0 | 20110126
   License: none (public domain)
*/

html, body, div, span, applet, object, iframe,
h1, h2, h3, h4, h5, h6, p, blockquote, pre,
a, abbr, acronym, address, big, cite, code,
del, dfn, em, img, ins, kbd, q, s, samp,
small, strike, strong, sub, sup, tt, var,
b, u, i, center,
dl, dt, dd, ol, ul, li,
fieldset, form, label, legend,
table, caption, tbody, tfoot, thead, tr, th, td,
article, aside, canvas, details, embed, 
figure, figcaption, footer, header, hgroup, 
menu, nav, output, ruby, section, summary,
time, mark, audio, video {
	margin: 0;
	padding: 0;
	border: 0;
	font-size: 100%;
	font: inherit;
	vertical-align: baseline;
}
/* HTML5 display-role reset for older browsers */
article, aside, details, figcaption, figure, 
footer, header, hgroup, menu, nav, section {
	display: block;
}
body {
	line-height: 1;
}
ol, ul {
	list-style: none;
}
blockquote, q {
	quotes: none;
}
blockquote:before, blockquote:after,
q:before, q:after {
	content: '';
	content: none;
}
table {
	border-collapse: collapse;
	border-spacing: 0;
}



    .content {
        position: relative;
        overflow: scroll;
        height: 200px;
    }
    .tg  {border-collapse:collapse;border-spacing:0;}
    .tg td{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
      overflow:hidden;padding:10px 5px;word-break:normal;}
    .tg th{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
      font-weight:normal;overflow:hidden;padding:10px 5px;word-break:normal;}
    .tg .tg-0pky{border-color:inherit;text-align:left;vertical-align:top}
    .tg .tg-0lax{text-align:left;vertical-align:top}

    thead {
        position: sticky;
        top: 0;
        background-color: red;
        /* opacity: 0.34; */
        z-index: 100;
    }
    tbody tr td:nth-child(2){
        position: relative;
    }
    .target {
        display: block;
    }
    .target.active {
        /* position: fixed; */
    }

    .content2 {
        position: relative;
        margin-top: 100px;
    }

    /* toast ui style */
    #grid {
        height: 300px;
        position: relative;
        overflow-y: scroll;
    }
    .tui-grid-header-area {
        position: fixed;
        top: 91px;
        z-index: 200;
        background-color: #747A81 !important;

    }
    .tui-grid-body-area {
        /* padding-top: 40px; */
    }

    .tui-grid-cell-header {
        padding: 0;
    }

    .tui-grid-lside-area {}

    .tui-grid-lside-area .tui-grid-header-area {
        width: 40px;
    }

    .tui-grid-cell.active {
        vertical-align: top !important;
        background-color: coral;
    }
    </style>
<body>
    @@include('./src/html/header/header.html')

    <h2>
        h2입니다.123
    </h2>
    <div class="content2">
        <div id="grid"></div>
    </div>
    <div class="content" style="display: none;">
        <table class="tg">
            <thead>
              <tr>
                <th class="tg-0pky"></th>
                <th class="tg-0pky">a</th>
                <th class="tg-0lax">b</th>
                <th class="tg-0lax">c</th>
                <th class="tg-0lax">d</th>
                <th class="tg-0lax">e</th>
                <th class="tg-0lax">f</th>
                <th class="tg-0lax">g</th>
                <th class="tg-0lax">h</th>
              </tr>
            </thead>
            <tbody>
                <tr>
                    <td class="tg-0lax">8</td>
                    <td class="tg-0lax">asd</td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                  </tr>
                  <tr>
                    <td class="tg-0lax">8</td>
                    <td class="tg-0lax">asd</td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                  </tr>
                  <tr>
                    <td class="tg-0lax">8</td>
                    <td class="tg-0lax">asd</td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                  </tr>
                  <tr>
                    <td class="tg-0lax">8</td>
                    <td class="tg-0lax">asd</td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                  </tr>
                  <tr>
                    <td class="tg-0lax">8</td>
                    <td class="tg-0lax">asd</td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                  </tr>
                  <tr>
                    <td class="tg-0lax">8</td>
                    <td class="tg-0lax">asd</td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                    <td class="tg-0lax"></td>
                  </tr>
            <tr>
                <td class="tg-0pky">1</td>
                <td class="tg-0pky" style="width: 25%;" rowspan="7"><span class="target ready">위성</span></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
            </tr>
              <tr>
                <td class="tg-0pky">2</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0pky">3</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0pky">4</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">5</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">6</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">7</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">8</td>
                <td class="tg-0lax">asd</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">9</td>
                <td class="tg-0lax">123</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0pky">1</td>
                <td class="tg-0pky" style="width: 25%;" rowspan="7"><span class="target ready target2">위성2</span></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
            </tr>
              <tr>
                <td class="tg-0pky">2</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0pky">3</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0pky">4</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">5</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">6</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">7</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">10</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">10</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">10</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">10</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">10</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">10</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">10</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">10</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">10</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">10</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">10</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">10</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">10</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0pky">1</td>
                <td class="tg-0pky" style="width: 25%;" rowspan="2"><span class="target ready target3">위성3</span></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
            </tr>
              <tr>
                <td class="tg-0pky">2</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">10</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">10</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">10</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">10</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">10</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
              <tr>
                <td class="tg-0lax">10</td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
                <td class="tg-0lax"></td>
              </tr>
            </tbody>
            </table>
        <div class="sticky">I will stick to the screen when you reach my scroll position</div>
        <!-- 이미지 루트 -->
        <!-- <img src="/resources/images/20220301-Event-kakao-visual-2x.jpg" alt=""> -->
    </div>
    @@include('./src/html/footer/footer.html', {
        type : 'mobile'
    })

    <script src="/resources/lib/tui/tui-grid.js"></script>
    <script type="text/javascript" src="/resources/lib/tui/data.js"></script>
    <script>
        var content = document.querySelector(".content");

        var table = document.querySelector(".tg");
        var tbody = table.querySelector("tbody");
        var _targetAll = tbody.querySelectorAll(".target");


        let lastScroll = 0;
        const headerValue = 37;


        /*
        // toast ui target class
        target = .tui-grid-cell-content
        */

        var targetArray = [];
        


        window.addEventListener("load", ()=> {
            console.log("load")
            var content2 = document.querySelector(".content2");
            var root = document.querySelector("#grid"); // root

            // riside table Area cunstructor
            var rsideTableArea = root.querySelector(".tui-grid-rside-area");
            var rsideTableBodyArea = rsideTableArea.querySelector(".tui-grid-body-area");
            var rsideTable = rsideTableBodyArea.querySelector(".tui-grid-table"); // rside table
            var rsideTableBody = rsideTable.querySelector("tbody"); // rside tbody
            var rsideTbodyTr = rsideTableBody.querySelectorAll("tr");

            // text 높이 -> cell 높이 / 2를 한 값.
            var textHeight = 20;


            function textInit(target) {
                target.style.transform = `translateY(${textHeight/2}px)`
            }

            // 테이블 동적 병합
            $.fn.mergeClassRowspan = function (colIdx) {
                return this.each(function () {
                    var that;
                    $('tr', this).each(function (row) {
                        $('td:eq(' + colIdx + ')', this).filter(':visible').each(function (col) {

                            if ($(this).attr('class') == $(that).attr('class')) {
                                rowspan = $(that).attr("rowspan") || 1;
                                rowspan = Number(rowspan) + 1;

                                $(that).attr("rowspan", rowspan);

                                // do your action for the colspan cell here            
                                // $(this).hide();

                                // $(this).remove(); 
                                // do your action for the old cell here

                            } else {
                                that = this;
                            }

                            // set the that if not already set
                            that = (that == null) ? this : that;
                        });
                    });
                });
            };

            // 타겟의 위치 구하기.
            // tr
            
            for(var i = 0; i<rsideTbodyTr.length; i++) {
                const rsideTbodyTrChildCount = rsideTbodyTr[i].childElementCount;
                const target = rsideTbodyTr[i];

                const tempArray = [];

                // td의 데이터를 찾아 클래스명 삽입
                for(var j = 0; j<rsideTbodyTrChildCount-1; j++) {
                    const result = target.childNodes[j];

                    //tr의 자식들[1] - 두번째 영역의 모든 text 찾기
                    const getTd = target.children[2];
                    const trText = getTd.querySelector("div").innerText;

                    // 데이터가 있음을 확인
                    if(trText) {
                        if(trText === "Deluxe") {
                            getTd.classList.add("deluxe")
                        }
                        if(trText === "EP") {
                            getTd.classList.add("EP")
                        }
                        if(trText === "Single") {
                            getTd.classList.add("Single")
                        }
                    }else {
                        
                    }

                }

                // 상태 체크하여 데이터 조작하기
              
                if(i === rsideTbodyTr.length-1) {

                    // $('#grid .tui-grid-rside-area .tui-grid-body-area tbody').mergeClassRowspan(1);
                    // add classes
                    for(var k = 0; k<rsideTbodyTr.length; k++) {
                        const testTarget = rsideTbodyTr[k];

                        if(testTarget.childNodes[2] && testTarget.childNodes[2].rowSpan >1) {
                            console.log("있음?", testTarget.childNodes[2])
                            testTarget.childNodes[2].classList.add("active"); // vertical-align : top
                            testTarget.childNodes[2].querySelector("div").classList.add("ready"); // readt 클래스 부여
                            textInit(testTarget.childNodes[2].querySelector("div")) // text 상태 초기화
                            // targetArray.push(testTarget.childNodes[2].querySelector("div"));

                            tempArray.push(testTarget.childNodes[2].querySelector("div"));
                        }else {
                            console.log("없음")
                        }

                        if(k === rsideTbodyTr.length-1) {
                            targetArray = tempArray
                        }
                    }
                    
                      // 그리드 sort하는법
                        // grid.sort('artist', true)
                } 
            }; 


            function followLabel(el, scrollValue, headValue, direction) {
            var target = el;
            var scrollValue = scrollValue;
            var headValue = 20;

            function init(scrollValue, target) {
                if(target.classList.contains("ready") && (target.parentElement.offsetHeight + target.parentElement.offsetTop - (headValue*2)  < scrollValue) ) {
                    target.style.transform = `translateY(${target.parentElement.offsetHeight-headValue-(textHeight/2)}px)`
                }else if(target.classList.contains("ready") && (target.parentElement.offsetHeight + target.parentElement.offsetTop - (headValue*2)  > scrollValue)) {
                    target.style.transform = `translateY(${textHeight/2}px)`
                }
            }

            
            console.log(target.parentElement.offsetTop)
            // 감시 영역 조건문
            if(scrollValue >= target.parentElement.offsetTop-headValue+textHeight && scrollValue <= target.parentElement.offsetHeight + target.parentElement.offsetTop - (headValue*2) ) {
                target.classList.remove("ready");
                target.classList.add("active");
                target.style.transform = `translateY(${scrollValue-target.parentElement.offsetTop+headValue-(textHeight/2)}px)`
            }else {
                target.classList.remove("active");
                target.classList.add("ready");
                // 감시 영역을 벗어남 + 비정상 translate 값 초기화
                init(scrollValue, target)
            }
        };

            function scrollDirection(currentScroll) {
                if (currentScroll > 0 && lastScroll <= currentScroll){
                    lastScroll = currentScroll;
                    // console.log('down')
                    return true;


                }else{
                    lastScroll = currentScroll;
                    return false;
                    // console.log('up')
                    
                }
            }

            root.addEventListener("scroll", (e) => {
                const scrollValue = e.target.scrollTop;
                let currentScroll = content.scrollTop || document.body.scrollTop;

                // console.log(scrollDirection(currentScroll))
                if(scrollDirection(currentScroll)) {
                    for(var i = 0; i<targetArray.length; i++) {
                        followLabel(targetArray[i], scrollValue, headerValue)
                    }
                }else {
                    for(var i = 0; i<targetArray.length; i++) {
                        followLabel(targetArray[i], scrollValue, headerValue)
                    }
                }
            });

                
        });

            

        



        


        //토스트ui test data
        // let data = [];
        //     for(var i = 0; i<100; i++) {
        //         var tempData = {
        //             name : `name-data--${i}`,
        //             artist : `artist-data--${i}`,
        //             type : `type-data--${i}`,
        //             release : `release-data--${i}`,
        //             genre : `genre-data--${i}`,
        //         }
        //         newData = data.push(tempData);
        //     }
        
        //     console.log(newData)

        
        // 임시 데이터
        // var gridData = [
        //     {
        //         id: 549731,
        //         name: 'Beautiful Lies',
        //         artist: 'Birdy',
        //         release: '2016.03.26',
        //         type: 'Deluxe',
        //         typeCode: '1',
        //         genre: 'Pop',
        //         genreCode: '1',
        //         grade: '2',
        //         price: 10000,
        //         downloadCount: 1000,
        //         listenCount: 5000,
        //     },
        //     {
        //         id: 436461,
        //         name: 'X',
        //         artist: 'Ed Sheeran',
        //         release: '2014.06.24',
        //         type: 'Deluxe',
        //         typeCode: '1',
        //         genre: 'Pop',
        //         genreCode: '1',
        //         grade: '3',
        //         price: 20000,
        //         downloadCount: 1000,
        //         listenCount: 5000,
        //     },
        //     {
        //         id: 295651,
        //         name: 'Moves Like Jagger',
        //         release: '2011.08.08',
        //         artist: 'Maroon5',
        //         type: 'Single',
        //         typeCode: '3',
        //         genre: 'Pop,Rock',
        //         genreCode: '1,2',
        //         grade: '2',
        //         price: 7000,
        //         downloadCount: 1000,
        //         listenCount: 5000,
        //     },
        //     {
        //         id: 541713,
        //         name: 'A Head Full Of Dreams',
        //         artist: 'Coldplay',
        //         release: '2015.12.04',
        //         type: 'Deluxe',
        //         typeCode: '1',
        //         genre: 'Rock',
        //         genreCode: '2',
        //         grade: '3',
        //         price: 25000,
        //         downloadCount: 1000,
        //         listenCount: 5000,
        //     },
        //     {
        //         id: 265289,
        //         name: '21',
        //         artist: 'Adele',
        //         release: '2011.01.21',
        //         type: 'Deluxe',
        //         typeCode: '1',
        //         genre: 'Pop,R&B',
        //         genreCode: '1,3',
        //         grade: '3',
        //         price: 15000,
        //         downloadCount: 1000,
        //         listenCount: 5000,
        //     },
        //     {
        //         id: 555871,
        //         name: 'Warm On A Cold Night',
        //         artist: 'HONNE',
        //         release: '2016.07.22',
        //         type: 'EP',
        //         typeCode: '1',
        //         genre: 'R&B,Electronic',
        //         genreCode: '3,4',
        //         grade: '2',
        //         price: 11000,
        //         downloadCount: 1000,
        //         listenCount: 5000,
        //     },
        //     {
        //         id: 550571,
        //         name: 'Take Me To The Alley',
        //         artist: 'Gregory Porter',
        //         release: '2016.09.02',
        //         type: 'Deluxe',
        //         typeCode: '1',
        //         genre: 'Jazz',
        //         genreCode: '5',
        //         grade: '3',
        //         price: 30000,
        //         downloadCount: 1000,
        //         listenCount: 5000,
        //     },
        //     {
        //         id: 544128,
        //         name: 'Make Out',
        //         artist: 'LANY',
        //         release: '2015.12.11',
        //         type: 'EP',
        //         typeCode: '2',
        //         genre: 'Electronic',
        //         genreCode: '4',
        //         grade: '2',
        //         price: 12000,
        //         downloadCount: 1000,
        //         listenCount: 5000,
        //     },
        //     {
        //         id: 366374,
        //         name: 'Get Lucky',
        //         artist: 'Daft Punk',
        //         release: '2013.04.23',
        //         type: 'Single',
        //         typeCode: '3',
        //         genre: 'Pop,Funk',
        //         genreCode: '1,5',
        //         grade: '3',
        //         price: 9000,
        //         downloadCount: 1000,
        //         listenCount: 5000,
        //     },
        //     {
        //         id: 8012747,
        //         name: 'Valtari',
        //         artist: 'Sigur Rós',
        //         release: '2012.05.31',
        //         type: 'EP',
        //         typeCode: '3',
        //         genre: 'Rock',
        //         genreCode: '2',
        //         grade: '3',
        //         price: 10000,
        //         downloadCount: 1000,
        //         listenCount: 5000,
        //     },
        //     {
        //         id: 502792,
        //         name: 'Bush',
        //         artist: 'Snoop Dogg',
        //         release: '2015.05.12',
        //         type: 'EP',
        //         typeCode: '2',
        //         genre: 'Hiphop',
        //         genreCode: '5',
        //         grade: '3',
        //         price: 18000,
        //         downloadCount: 1000,
        //         listenCount: 5000,
        //     },
        //     {
        //         id: 294574,
        //         name: '2',
        //         artist: 'Beyoncé',
        //         release: '2011.07.26',
        //         type: 'Deluxe',
        //         typeCode: '1',
        //         genre: 'Pop',
        //         genreCode: '1',
        //         grade: '3',
        //         price: 12000,
        //         downloadCount: 1000,
        //         listenCount: 5000,
        //     },
        //     {
        //         id: 317659,
        //         name: "I Won't Give Up",
        //         artist: 'Jason Mraz',
        //         release: '2012.01.03',
        //         type: 'Single',
        //         typeCode: '3',
        //         genre: 'Pop',
        //         genreCode: '1',
        //         grade: '2',
        //         price: 7000,
        //         downloadCount: 1000,
        //         listenCount: 5000,
        //     },
        //     {
        //         id: 583551,
        //         name: 'Following My Intuition',
        //         artist: 'Craig David',
        //         release: '2016.10.01',
        //         type: 'Deluxe',
        //         typeCode: '1',
        //         genre: 'R&B,Electronic',
        //         genreCode: '3,4',
        //         grade: '3',
        //         price: 15000,
        //         downloadCount: 1000,
        //         listenCount: 5000,
        //     },
        //     {
        //         id: 490500,
        //         name: 'Blue Skies',
        //         release: '2015.03.18',
        //         artist: 'Lenka',
        //         type: 'Single',
        //         typeCode: '3',
        //         genre: 'Pop,Rock',
        //         genreCode: '1,2',
        //         grade: '3',
        //         price: 6000,
        //         downloadCount: 1000,
        //         listenCount: 5000,
        //     },
        //     {
        //         id: 587871,
        //         name: 'This Is Acting',
        //         artist: 'Sia',
        //         release: '2016.10.22',
        //         type: 'EP',
        //         typeCode: '2',
        //         genre: 'Pop',
        //         genreCode: '1',
        //         grade: '3',
        //         price: 20000,
        //         downloadCount: 1000,
        //         listenCount: 5000,
        //     },
        //     {
        //         id: 504288,
        //         name: 'Blurryface',
        //         artist: 'Twenty One Pilots',
        //         release: '2015.05.19',
        //         type: 'EP',
        //         typeCode: '2',
        //         genre: 'Rock',
        //         genreCode: '2',
        //         grade: '1',
        //         price: 13000,
        //         downloadCount: 1000,
        //         listenCount: 5000,
        //     },
        //     {
        //         id: 450720,
        //         name: "I'm Not The Only One",
        //         artist: 'Sam Smith',
        //         release: '2014.09.15',
        //         type: 'Single',
        //         typeCode: '3',
        //         genre: 'Pop,R&B',
        //         genreCode: '1,3',
        //         grade: '2',
        //         price: 8000,
        //         downloadCount: 1000,
        //         listenCount: 5000,
        //     },
        //     {
        //         id: 498896,
        //         name: 'The Magic Whip',
        //         artist: 'Blur',
        //         release: '2015.04.27',
        //         type: 'EP',
        //         typeCode: '2',
        //         genre: 'Rock',
        //         genreCode: '2',
        //         grade: '3',
        //         price: 15000,
        //         downloadCount: 1000,
        //         listenCount: 5000,
        //     },
        //     {
        //         id: 491379,
        //         name: 'Chaos And The Calm',
        //         artist: 'James Bay',
        //         release: '2015.03.23',
        //         type: 'EP',
        //         typeCode: '2',
        //         genre: 'Pop,Rock',
        //         genreCode: '1,2',
        //         grade: '3',
        //         price: 12000,
        //         downloadCount: 1000,
        //         listenCount: 5000,
        //     },
        //     ];
        
            // 그리드 init
        const grid = new tui.Grid({
            el: document.getElementById('grid'),
      data: gridData,
      scrollX: false,
      scrollY: false,
      columns: [
        {
          header: 'Name',
          name: 'name',
          sortable: true,
          filter: 'text',
          rowSpan: true,
          onBeforeChange(ev) {
            console.log('Before change:' + ev);
        },
        editor: 'text',
        },
        {
          header: 'Artist',
          name: 'artist',
          sortable: true,
          filter: 'text',
          rowSpan: true
        },
        {
          header: 'Type',
          name: 'type',
          sortable: true,
          filter: 'select',
          rowSpan: true
        },
        {
          header: 'Release',
          name: 'release',
          sortable: true,
          rowSpan: true
        },
        {
          header: 'Genre',
          name: 'genre',
          sortable: true,
          rowSpan: true
        }
      ],
    //   draggable: true
    onGridMounted : function(ev) {
        console.log("mounted")
    },
    onGridUpdated : function() {
        console.log("update")
    }
    });

    grid.on("beforeSort", function(ev) {
        console.log("before sort", ev)

    })
    grid.on("afterSort", function(ev) {
        console.log("after sort ", ev)
        
        
    })
    grid.on("beforeUnsort", function(ev) {
        console.log("before Un sort")
    })
    grid.on("afterUnsort", function(ev) {
        console.log("after Un sort ", targetArray)
        
    })
        
   

    </script>
</body>
</html>